<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width">

		<meta name="description" content="Global Mapping of Organizations Working on Gender and Migration"/>
		<meta name="keywords" content="women’s rights, labor rights, climate justice, development, democratization" />
		<meta name="author" content="No Borders To Equality" />
		<meta name="robots" content="index" />
		<meta http-equiv="cache-control" content="no-cache" />

		<meta property="og:url" content=""/>
		<meta property="og:type" content="website" />
		<meta property="og:title" content="No Borders To Equality"/>
		<meta property="og:description" content="Global Mapping of Organizations Working on Gender and Migration"/>
		<meta property="og:image" content="img/ogp.jpg"/>
		<meta property="og:image:alt" content="No Borders To Equality"/>
		<meta property="fb:page_id" content="#" />
		<link rel="icon" type="image/png" href="img/favicon.ico">

		<link rel="preconnect" href="https://fonts.gstatic.com">
		<link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;700;900&display=swap" rel="stylesheet">
		<link rel="stylesheet" href="css/map.css">
		<link rel="stylesheet" href="css/styles.css?ver=1.2">
		<style>
			.gm-style .gm-style-iw-d {
				text-align: center;
			}
		</style>
		<title>No Borders To Equality</title>
	</head>
	<body>

		<div id="preload" class="flex flexAligner flexCenter loading">
			<div class="lds-ring"><div></div><div></div><div></div><div></div></div>
			<img src="img/preloadWorld.svg" alt="loading" ondragstart="return false;">
		</div>
		
		<header id="header">
			<nav>
				<div class="wimn-logo">
					<a href="index.html">
						<h1><span>NO BORDERS</span><br>TO EQUALITY</h1>
						<div id="myearth">
							<div id="glow"></div>
						</div>
					</a>
				</div>
				<div id="btnMenu" class="hamburger hamburger--spin onlyMob" onclick="buttonMenu()">
					<div class="hamburger-box">
						<div class="hamburger-inner"></div>
					</div>
				</div>
				<div id="main-nav" class="wimn-menu navbar flexMob">
					<a class="link active" href="index.html">Home</a>
					<div class="subnav link">
						<a class="subnavbtn">About</a>
						<div class="subnav-content">
							<a class="sub-link" href="mapping-project.html">Mapping Project</a>
							<a class="sub-link" href="project-partners.html">Project Partners</a>
							<a class="sub-link" href="links.html">Links</a>
						</div>
					</div>
					<a class="link" href="interactive-data.html">Interactive Data Visualization</a>
					<a class="link" href="report.html">Report</a>
				</div>
			</nav>
		</header>

		<section class="container-home mt-postHeader">
			<div class="row">
				<div class="col-12 frase-principal">
					<h3>Global Mapping of Organizations Working on</h3>
					<h2>Gender and Migration</h2>
					<p>This interactive global map features organizations addressing the intersection of gender and migration. You can filter organizations by different categories to find out the specific focus of their work.</p>
				</div>
			</div>
			<div class="row">
				<div class="col-12 maps-wimn">
					<div class="interactiveMap">
						<div class="boteneraMap select animated zoomIn">
							<input type="radio" name="types" class="select-null">
							<i class="toggle icon icon-arrow-down select-null"></i>
							<i class="toggle icon icon-arrow-up select-null"></i>
							<span class="placeholder">Select Categories</span>
							<label class="option"><input type="radio" name="types" onclick="showAllMarkers()" checked="checked"><span class="title animated fadeIn">All categories</span></label>
							<label class="option"><input type="radio" name="types" onclick="clearMarkers1()"><span class="title animated fadeIn">Migrant women's rights</span></label>
							<label class="option"><input type="radio" name="types" onclick="clearMarkers2()"><span class="title animated fadeIn">Labor rights</span></label>
							<label class="option"><input type="radio" name="types" onclick="clearMarkers3()"><span class="title animated fadeIn">LGBTQ+ rights</span></label>
							<label class="option"><input type="radio" name="types" onclick="clearMarkers4()"><span class="title animated fadeIn">Black and indigenous rights</span></label>
							<label class="option"><input type="radio" name="types" onclick="clearMarkers5()"><span class="title animated fadeIn">Climate, environment and displacement</span></label>
							<label class="option"><input type="radio" name="types" onclick="clearMarkers6()"><span class="title animated fadeIn">Migrant woman led organizations</span></label>
						</div>

						<div class="map" id="map"></div>
					</div>
				</div>
			</div>
			<div class="cards">
				<div class="card">
					<a href="interactive-data.html">
						<div class="icon">
							<img src="img/data.svg" alt="Interactive Data Visualization" ondragstart="return false;">
							<p>Interactive Data Visualization</p>
						</div>
					</a>
				</div>
				
				<div class="card">
					<a href="report.html">
						<div class="icon">
							<img src="img/informe.svg" alt="Report" ondragstart="return false;">
							<p>Report</p>
						</div>
					</a>
				</div>
			</div>
		</section>

		<footer>
			<div class="container-home">
				<div class="partners">
					<p>A publication by</p>
					<a href="#" target="_blank">
						<img src="./img/logo-wimn.svg" alt="Women In Migration Network Logotype">
					</a>
					<a href="https://www.fes.de/en/displacement-migration-integration" target="_blank">
						<img src="./img/logo-fes.svg" alt="Friedrich Ebert Stiftung Logotype">
					</a>
				</div>
				<hr>
				<div class="copy"><p>Copyright © 2022 - All Rights Reserved</p></div>
				<div class="quintoImpacto"><p>Developed by <a href="http://quintoimpacto.net/" target="_blank" rel="nofollow noreferrer">
						<img src="./img/quintoImpacto.svg" alt="Quinto Impacto Logotype">
					</a></p>
				</div>
			</div>	
		</footer>
		
		<script src="js/miniature.earth.core.js"></script>
		<script src="js/map.js"></script>
		<script>
			// menu
			var btnMenu = document.getElementById("btnMenu");
			var mainNav = document.getElementById("main-nav");
			var loadingScreen = document.getElementById("preload");
			var popup = document.getElementById("popup");

			function buttonMenu() {
				btnMenu.classList.toggle("is-active");
				mainNav.classList.toggle("showMenu");
			}

			setTimeout(function(){
				loadingScreen.classList.remove("loading");
				setTimeout(function(){
					loadingScreen.classList.add("hiddenPreload");
				}, 1500)
			}, 2000);
		</script>

		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

		<script>
			var organizations;
			var marker, i;
			var markers = [];

			function initMap() {
				var styledMapType = new google.maps.StyledMapType(
						[
							{
								"elementType": "geometry",
								"stylers": [
									{
										"color": "#ebe3cd"
									}
								]
							},
							{
								"elementType": "labels.text.fill",
								"stylers": [
									{
										"color": "#523735"
									}
								]
							},
							{
								"elementType": "labels.text.stroke",
								"stylers": [
									{
										"color": "#f5f1e6"
									}
								]
							},
							{
								"featureType": "administrative",
								"elementType": "geometry",
								"stylers": [
									{
										"visibility": "off"
									}
								]
							},
							{
								"featureType": "administrative",
								"elementType": "geometry.stroke",
								"stylers": [
									{
										"color": "#c9b2a6"
									}
								]
							},
							{
								"featureType": "administrative.land_parcel",
								"elementType": "geometry.stroke",
								"stylers": [
									{
										"color": "#dcd2be"
									}
								]
							},
							{
								"featureType": "administrative.land_parcel",
								"elementType": "labels.text.fill",
								"stylers": [
									{
										"color": "#ae9e90"
									}
								]
							},
							{
								"featureType": "landscape.natural",
								"elementType": "geometry",
								"stylers": [
									{
										"color": "#dfd2ae"
									}
								]
							},
							{
								"featureType": "poi",
								"stylers": [
									{
										"visibility": "off"
									}
								]
							},
							{
								"featureType": "poi",
								"elementType": "geometry",
								"stylers": [
									{
										"color": "#dfd2ae"
									}
								]
							},
							{
								"featureType": "poi",
								"elementType": "labels.text.fill",
								"stylers": [
									{
										"color": "#93817c"
									}
								]
							},
							{
								"featureType": "poi.park",
								"elementType": "geometry.fill",
								"stylers": [
									{
										"color": "#a5b076"
									}
								]
							},
							{
								"featureType": "poi.park",
								"elementType": "labels.text.fill",
								"stylers": [
									{
										"color": "#447530"
									}
								]
							},
							{
								"featureType": "road",
								"elementType": "geometry",
								"stylers": [
									{
										"color": "#f5f1e6"
									}
								]
							},
							{
								"featureType": "road",
								"elementType": "labels.icon",
								"stylers": [
									{
										"visibility": "off"
									}
								]
							},
							{
								"featureType": "road.arterial",
								"elementType": "geometry",
								"stylers": [
									{
										"color": "#fdfcf8"
									}
								]
							},
							{
								"featureType": "road.highway",
								"elementType": "geometry",
								"stylers": [
									{
										"color": "#f8c967"
									}
								]
							},
							{
								"featureType": "road.highway",
								"elementType": "geometry.stroke",
								"stylers": [
									{
										"color": "#e9bc62"
									}
								]
							},
							{
								"featureType": "road.highway.controlled_access",
								"elementType": "geometry",
								"stylers": [
									{
										"color": "#e98d58"
									}
								]
							},
							{
								"featureType": "road.highway.controlled_access",
								"elementType": "geometry.stroke",
								"stylers": [
									{
										"color": "#db8555"
									}
								]
							},
							{
								"featureType": "road.local",
								"elementType": "labels.text.fill",
								"stylers": [
									{
										"color": "#806b63"
									}
								]
							},
							{
								"featureType": "transit",
								"stylers": [
									{
										"visibility": "off"
									}
								]
							},
							{
								"featureType": "transit.line",
								"elementType": "geometry",
								"stylers": [
									{
										"color": "#dfd2ae"
									}
								]
							},
							{
								"featureType": "transit.line",
								"elementType": "labels.text.fill",
								"stylers": [
									{
										"color": "#8f7d77"
									}
								]
							},
							{
								"featureType": "transit.line",
								"elementType": "labels.text.stroke",
								"stylers": [
									{
										"color": "#ebe3cd"
									}
								]
							},
							{
								"featureType": "transit.station",
								"elementType": "geometry",
								"stylers": [
									{
										"color": "#dfd2ae"
									}
								]
							},
							{
								"featureType": "water",
								"elementType": "geometry.fill",
								"stylers": [
									{
										"color": "#b9d3c2"
									}
								]
							},
							{
								"featureType": "water",
								"elementType": "labels.text.fill",
								"stylers": [
									{
										"color": "#92998d"
									}
								]
							}
						],
						{ name: "WIMN" }
				);

				var latitude = 0;
				var longitude = 0;
				var zoom = 2; 

				var map = new google.maps.Map(document.getElementById('map'), {
					zoom : zoom,
					center : {
						lat : latitude,
						lng : longitude
					},
					mapTypeControlOptions: {
						mapTypeIds: ["roadmap", "styled_map"]
					}					
				});
				var styles = {
					default: null,
					hide: [
					{
						featureType: "poi.business",
						stylers: [{ visibility: "off" }]
					},
					{
						featureType: "transit",
						elementType: "labels.icon",
						stylers: [{ visibility: "off" }]
					}]
				};
				
				map.mapTypes.set("styled_map", styledMapType);
				map.setMapTypeId("styled_map");		
				var infowindow = new google.maps.InfoWindow();
				var type = type;

				$.ajax({url: "https://wimn.quinto.site/api/organization/map",
				success: function(result){
					console.log('The api request was completed OK');
					organizations = JSON.parse(result);
					
					
					if(organizations != null){
						for (i = 0; i < organizations.length; i++) {
							
							marker = new google.maps.Marker(
							{
								position : new google.maps.LatLng(organizations[i].latitude, organizations[i].longitude),
								title: organizations[i].name,
								type: organizations[i].type,
								map : map,
								icon : {
									url: '/img/marcador.svg',
									scaledSize: new google.maps.Size(25,25)	
								}
							});
							markers.push(marker);

							google.maps.event.addListener(marker, 'click', (function(marker, i) {
								return function() {
									getOrganizationInfo(organizations[i].id, infowindow);
									infowindow.open(map, marker);
								}
							})(marker, i));		
									
						}
					}
				}, error: function (result){
						console.log("The api request was not completed");
					},
				});
			}

			function clearMarkers1() {
				for (var i = 0; i < markers.length; i++) {
					if(organizations[i].type != "Migrant women's rights"){
						markers[i].setVisible(false);
					} else {
						markers[i].setVisible(true);	
					}
				}
			}
			function clearMarkers2() {
				for (var i = 0; i < markers.length; i++) {
					if(organizations[i].type != "Labor rights"){
						markers[i].setVisible(false);
					} else {
						markers[i].setVisible(true);	
					}
				}
			}
			function clearMarkers3() {
				for (var i = 0; i < markers.length; i++) {
					if(organizations[i].type != "LGBTQ+ rights"){
						markers[i].setVisible(false);
					} else {
						markers[i].setVisible(true);	
					}
				}
			}
			function clearMarkers4() {
				for (var i = 0; i < markers.length; i++) {
					if(organizations[i].type != "Black and indigenous rights"){
						markers[i].setVisible(false);
					} else {
						markers[i].setVisible(true);	
					}
				}
			}
			function clearMarkers5() {
				for (var i = 0; i < markers.length; i++) {
					if(organizations[i].type != "Climate, environment and displacement"){
						markers[i].setVisible(false);
					} else {
						markers[i].setVisible(true);	
					}
				}
			}
			function clearMarkers6() {
				for (var i = 0; i < markers.length; i++) {
					if(organizations[i].type != "Migrant woman led organizations"){
						markers[i].setVisible(false);
					} else {
						markers[i].setVisible(true);	
					}
				}
			}
			function showAllMarkers() {
				for (var i = 0; i < markers.length; i++) {
					if (!markers[i].getVisible()) {
						markers[i].setVisible(true);
					} else {
						markers[i].setVisible(true);
					}	
				}
			}

			function getOrganizationInfo(id, infowindow){
				$.ajax({
					url : 'https://wimn.quinto.site/api/organization/map/' + id,
					type : 'GET',
					success: function (data){
						var info = JSON.parse(data);
						var content = "<br/><span style='text-align=center'><h1><b>" + isEmpty(info.name) + "</b></h1></span><br>" + isEmpty(info.type) + "<br>" + isEmpty(info.description) + "<br/><br>" + isEmpty(info.address) + "<br/>" + addWebsite(info.web) + " " + addEmail(info.email);
						infowindow.setContent(content);
					}
				});
			}
			function isEmpty(string){
				if (string == null || string == '') {
					return '';
				} else {
					return string;
				}
			}
			function addWebsite(web){
				if (web == null || web == '') {
					return '';
				} else {
					return "<br><a href='" + web +"' target='_blank'>Visit website</a>  | ";
				}
			}
			function addEmail(email){
				if (email == null || email == '') {
					return '';
				} else {
					return "<a href='mailto:" + email + "'>Contact by email</a>";
				}
			}

		</script>
		<script async="async" defer="defer" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDKm7VJT8c1jfK0uJseFXJnxNZZmMxm4rA&callback=initMap"></script>	
		<script>
			$(window).scroll(function(){
				if ($(this).scrollTop() > 50) {
				$('#header').addClass('headerBack');
				} else {
				$('#header').removeClass('headerBack');
				}
			});
		</script>
	</body>
</html>
